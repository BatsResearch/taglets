## SLURM PROLOG ###############################################################
##    Job ID : 1689992
##  Job Name : run_taglets-ps.sh
##  Nodelist : gpu1404
##      CPUs : 1
##  Mem/Node : 65536 MB
## Directory : /gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots
##   Started : Tue Jul  6 10:31:59 EDT 2021
###############################################################################
module: loading 'cuda/9.2.148'
module: unloading 'python/2.7.12'
module: loading 'python/3.7.4'
Traceback (most recent call last):
  File "./run_jpl.py", line 1, in <module>
Traceback (most recent call last):
  File "./run_jpl.py", line 1, in <module>
    import taglets.task.jpl as jpl
  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/__init__.py", line 1, in <module>
    import taglets.task.jpl as jpl
  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/__init__.py", line 1, in <module>
    from .controller import Controller
  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/controller.py", line 10, in <module>
    from .controller import Controller
  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/controller.py", line 10, in <module>
    accelerator = Accelerator()
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/accelerator.py", line 79, in __init__
    accelerator = Accelerator()
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/accelerator.py", line 79, in __init__
    self.state = AcceleratorState(fp16=fp16, cpu=cpu, _from_accelerator=True)
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/state.py", line 125, in __init__
    self.state = AcceleratorState(fp16=fp16, cpu=cpu, _from_accelerator=True)
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/state.py", line 125, in __init__
    torch.distributed.init_process_group(backend="nccl")
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 442, in init_process_group
    torch.distributed.init_process_group(backend="nccl")
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 442, in init_process_group
    barrier()
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 1947, in barrier
    barrier()
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 1947, in barrier
    work = _default_pg.barrier()
RuntimeError: NCCL error in: /pytorch/torch/lib/c10d/ProcessGroupNCCL.cpp:784, invalid usage, NCCL version 2.7.8
    work = _default_pg.barrier()
RuntimeError: NCCL error in: /pytorch/torch/lib/c10d/ProcessGroupNCCL.cpp:784, invalid usage, NCCL version 2.7.8
Traceback (most recent call last):
  File "./run_jpl.py", line 1, in <module>
    import taglets.task.jpl as jpl
  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/__init__.py", line 1, in <module>
Traceback (most recent call last):
  File "./run_jpl.py", line 1, in <module>
    from .controller import Controller
  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/controller.py", line 10, in <module>
    accelerator = Accelerator()
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/accelerator.py", line 79, in __init__
    import taglets.task.jpl as jpl
  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/__init__.py", line 1, in <module>
    from .controller import Controller
  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/controller.py", line 10, in <module>
    self.state = AcceleratorState(fp16=fp16, cpu=cpu, _from_accelerator=True)    
accelerator = Accelerator()  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/state.py", line 125, in __init__

Traceback (most recent call last):
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/accelerator.py", line 79, in __init__
Traceback (most recent call last):
  File "./run_jpl.py", line 1, in <module>
Traceback (most recent call last):
  File "./run_jpl.py", line 1, in <module>
Traceback (most recent call last):
  File "./run_jpl.py", line 1, in <module>
  File "./run_jpl.py", line 1, in <module>
    torch.distributed.init_process_group(backend="nccl")    
self.state = AcceleratorState(fp16=fp16, cpu=cpu, _from_accelerator=True)  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 442, in init_process_group

  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/state.py", line 125, in __init__
    import taglets.task.jpl as jpl
      File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/__init__.py", line 1, in <module>
import taglets.task.jpl as jpl    
import taglets.task.jpl as jpl  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/__init__.py", line 1, in <module>

  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/__init__.py", line 1, in <module>
            torch.distributed.init_process_group(backend="nccl")import taglets.task.jpl as jplfrom .controller import Controller
    

          File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 442, in init_process_group
barrier()  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/__init__.py", line 1, in <module>
  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/controller.py", line 10, in <module>
from .controller import Controllerfrom .controller import Controller


  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 1947, in barrier
  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/controller.py", line 10, in <module>
  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/controller.py", line 10, in <module>
    from .controller import Controller    
accelerator = Accelerator()  File "/gpfs/data/sbach/bats/projects/taglets-project/taglets-pseudoshots/taglets/controller.py", line 10, in <module>

      File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/accelerator.py", line 79, in __init__
    accelerator = Accelerator()    accelerator = Accelerator()
barrier()
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/accelerator.py", line 79, in __init__

  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/accelerator.py", line 79, in __init__
      File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 1947, in barrier
accelerator = Accelerator()
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/accelerator.py", line 79, in __init__
    self.state = AcceleratorState(fp16=fp16, cpu=cpu, _from_accelerator=True)
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/state.py", line 125, in __init__
    self.state = AcceleratorState(fp16=fp16, cpu=cpu, _from_accelerator=True)    
self.state = AcceleratorState(fp16=fp16, cpu=cpu, _from_accelerator=True)  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/state.py", line 125, in __init__

      File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/state.py", line 125, in __init__
self.state = AcceleratorState(fp16=fp16, cpu=cpu, _from_accelerator=True)
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/state.py", line 125, in __init__
    torch.distributed.init_process_group(backend="nccl")
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 442, in init_process_group
    torch.distributed.init_process_group(backend="nccl")
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 442, in init_process_group
        work = _default_pg.barrier()    torch.distributed.init_process_group(backend="nccl")
torch.distributed.init_process_group(backend="nccl")

RuntimeError  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 442, in init_process_group
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 442, in init_process_group
: NCCL error in: /pytorch/torch/lib/c10d/ProcessGroupNCCL.cpp:784, invalid usage, NCCL version 2.7.8
    barrier()
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 1947, in barrier
        barrier()work = _default_pg.barrier()

  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 1947, in barrier
RuntimeError: NCCL error in: /pytorch/torch/lib/c10d/ProcessGroupNCCL.cpp:784, invalid usage, NCCL version 2.7.8
        barrier()barrier()

  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 1947, in barrier
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/distributed_c10d.py", line 1947, in barrier
    work = _default_pg.barrier()
RuntimeError:     NCCL error in: /pytorch/torch/lib/c10d/ProcessGroupNCCL.cpp:784, invalid usage, NCCL version 2.7.8work = _default_pg.barrier()

RuntimeError: NCCL error in: /pytorch/torch/lib/c10d/ProcessGroupNCCL.cpp:784, invalid usage, NCCL version 2.7.8
    work = _default_pg.barrier()
    RuntimeErrorwork = _default_pg.barrier(): 
NCCL error in: /pytorch/torch/lib/c10d/ProcessGroupNCCL.cpp:784, invalid usage, NCCL version 2.7.8
RuntimeError: NCCL error in: /pytorch/torch/lib/c10d/ProcessGroupNCCL.cpp:784, invalid usage, NCCL version 2.7.8
Traceback (most recent call last):
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/runpy.py", line 194, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/runpy.py", line 87, in _run_code
    exec(code, run_globals)
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/launch.py", line 260, in <module>
    main()
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/torch/distributed/launch.py", line 255, in main
    raise subprocess.CalledProcessError(returncode=process.returncode,
subprocess.CalledProcessError: Command '['/users/rbriden/data/rbriden/anaconda3/bin/python', '-u', './run_jpl.py', '--mode', 'dev', '--simple_version', 'false', '--folder', 'development']' returned non-zero exit status 1.
*****************************************
Setting OMP_NUM_THREADS environment variable for each process to be 1 in default, to avoid your system being overloaded, please further tune the variable for optimal performance in your application as needed. 
*****************************************
Traceback (most recent call last):
  File "/users/rbriden/data/rbriden/anaconda3/bin/accelerate", line 8, in <module>
    sys.exit(main())
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/commands/accelerate_cli.py", line 41, in main
    args.func(args)
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/commands/launch.py", line 307, in launch_command
    multi_gpu_launcher(args)
  File "/users/rbriden/data/rbriden/anaconda3/lib/python3.8/site-packages/accelerate/commands/launch.py", line 151, in multi_gpu_launcher
    raise subprocess.CalledProcessError(returncode=process.returncode, cmd=cmd)
subprocess.CalledProcessError: Command '['/users/rbriden/data/rbriden/anaconda3/bin/python', '-m', 'torch.distributed.launch', '--use_env', '--nproc_per_node', '8', './run_jpl.py', '--mode', 'dev', '--simple_version', 'false', '--folder', 'development']' returned non-zero exit status 1.
